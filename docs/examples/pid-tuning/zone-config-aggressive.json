{
    "version": "1.0",
    "comment": "Aggressive PID tuning -- higher Kp+Ki with derivative damping. Reaches target temperature quickly and holds tight. Suitable for noise-sensitive environments (labs, offices) where fans should settle fast rather than ramp gradually.",
    "sensors": [
        {
            "name": "CPU_Temp",
            "type": "temp",
            "readPath": "/xyz/openbmc_project/sensors/temperature/CPU_Temp",
            "writePath": "",
            "timeout": 3,
            "ignoreDbusMinMax": true
        },
        {
            "name": "Inlet_Temp",
            "type": "temp",
            "readPath": "/xyz/openbmc_project/sensors/temperature/Inlet_Temp",
            "writePath": "",
            "timeout": 3,
            "ignoreDbusMinMax": true
        },
        {
            "name": "DIMM_Temp",
            "type": "temp",
            "readPath": "/xyz/openbmc_project/sensors/temperature/DIMM_Temp",
            "writePath": "",
            "timeout": 3,
            "ignoreDbusMinMax": true
        },
        {
            "name": "Fan0",
            "type": "fan",
            "readPath": "/xyz/openbmc_project/sensors/fan_tach/Fan0",
            "writePath": "/sys/class/hwmon/hwmon0/pwm1",
            "timeout": 3,
            "ignoreDbusMinMax": false
        },
        {
            "name": "Fan1",
            "type": "fan",
            "readPath": "/xyz/openbmc_project/sensors/fan_tach/Fan1",
            "writePath": "/sys/class/hwmon/hwmon0/pwm2",
            "timeout": 3,
            "ignoreDbusMinMax": false
        },
        {
            "name": "Fan2",
            "type": "fan",
            "readPath": "/xyz/openbmc_project/sensors/fan_tach/Fan2",
            "writePath": "/sys/class/hwmon/hwmon0/pwm3",
            "timeout": 3,
            "ignoreDbusMinMax": false
        },
        {
            "name": "Fan3",
            "type": "fan",
            "readPath": "/xyz/openbmc_project/sensors/fan_tach/Fan3",
            "writePath": "/sys/class/hwmon/hwmon0/pwm4",
            "timeout": 3,
            "ignoreDbusMinMax": false
        }
    ],
    "zones": [
        {
            "id": 0,
            "minThermalOutput": 15.0,
            "failsafePercent": 100.0,
            "comment": "Lower floor (15%) allows fans to run quieter when temps are well below setpoint"
        }
    ],
    "pid": [
        {
            "name": "CPU_Temp_Controller",
            "type": "temp",
            "inputs": ["CPU_Temp"],
            "setpoint": 75.0,
            "pid": {
                "samplePeriod": 0.5,
                "proportionalCoeff": -0.3,
                "integralCoeff": -0.4,
                "feedFwdOffsetCoeff": -0.05,
                "feedFwdGainCoeff": 0.0,
                "integralLimit_min": 0.0,
                "integralLimit_max": 100.0,
                "outLim_min": 15.0,
                "outLim_max": 100.0,
                "slewNeg": 10.0,
                "slewPos": 0.0
            },
            "comment": "Kp=-0.3 reacts immediately to error. Ki=-0.4 accumulates correction aggressively. Kd (feedFwdOffset)=-0.05 dampens oscillation from the high Ki. Faster sample period (0.5s). slewPos=0 allows unlimited ramp-up; slewNeg=10 limits ramp-down to prevent acoustic 'hunting'. Lower setpoint (75C) keeps headroom for transients."
        },
        {
            "name": "Inlet_Temp_Controller",
            "type": "temp",
            "inputs": ["Inlet_Temp"],
            "setpoint": 30.0,
            "pid": {
                "samplePeriod": 0.5,
                "proportionalCoeff": -0.2,
                "integralCoeff": -0.35,
                "feedFwdOffsetCoeff": -0.03,
                "feedFwdGainCoeff": 0.0,
                "integralLimit_min": 0.0,
                "integralLimit_max": 100.0,
                "outLim_min": 15.0,
                "outLim_max": 100.0,
                "slewNeg": 8.0,
                "slewPos": 0.0
            },
            "comment": "Inlet setpoint lowered to 30C for tighter ambient control. Strong Ki drives fans up when intake air warms."
        },
        {
            "name": "DIMM_Temp_Controller",
            "type": "temp",
            "inputs": ["DIMM_Temp"],
            "setpoint": 70.0,
            "pid": {
                "samplePeriod": 0.5,
                "proportionalCoeff": -0.25,
                "integralCoeff": -0.35,
                "feedFwdOffsetCoeff": -0.04,
                "feedFwdGainCoeff": 0.0,
                "integralLimit_min": 0.0,
                "integralLimit_max": 100.0,
                "outLim_min": 15.0,
                "outLim_max": 100.0,
                "slewNeg": 8.0,
                "slewPos": 0.0
            },
            "comment": "DIMM setpoint at 70C -- aggressive gains compensate for high thermal mass."
        },
        {
            "name": "Fan0_Speed",
            "type": "fan",
            "inputs": ["Fan0"],
            "setpoint": 7000.0,
            "pid": {
                "samplePeriod": 0.5,
                "proportionalCoeff": 0.0,
                "integralCoeff": 0.0,
                "feedFwdOffsetCoeff": 0.0,
                "feedFwdGainCoeff": 1.0,
                "integralLimit_min": 0.0,
                "integralLimit_max": 100.0,
                "outLim_min": 0.0,
                "outLim_max": 100.0,
                "slewNeg": 0.0,
                "slewPos": 0.0
            }
        },
        {
            "name": "Fan1_Speed",
            "type": "fan",
            "inputs": ["Fan1"],
            "setpoint": 7000.0,
            "pid": {
                "samplePeriod": 0.5,
                "proportionalCoeff": 0.0,
                "integralCoeff": 0.0,
                "feedFwdOffsetCoeff": 0.0,
                "feedFwdGainCoeff": 1.0,
                "integralLimit_min": 0.0,
                "integralLimit_max": 100.0,
                "outLim_min": 0.0,
                "outLim_max": 100.0,
                "slewNeg": 0.0,
                "slewPos": 0.0
            }
        },
        {
            "name": "Fan2_Speed",
            "type": "fan",
            "inputs": ["Fan2"],
            "setpoint": 7000.0,
            "pid": {
                "samplePeriod": 0.5,
                "proportionalCoeff": 0.0,
                "integralCoeff": 0.0,
                "feedFwdOffsetCoeff": 0.0,
                "feedFwdGainCoeff": 1.0,
                "integralLimit_min": 0.0,
                "integralLimit_max": 100.0,
                "outLim_min": 0.0,
                "outLim_max": 100.0,
                "slewNeg": 0.0,
                "slewPos": 0.0
            }
        },
        {
            "name": "Fan3_Speed",
            "type": "fan",
            "inputs": ["Fan3"],
            "setpoint": 7000.0,
            "pid": {
                "samplePeriod": 0.5,
                "proportionalCoeff": 0.0,
                "integralCoeff": 0.0,
                "feedFwdOffsetCoeff": 0.0,
                "feedFwdGainCoeff": 1.0,
                "integralLimit_min": 0.0,
                "integralLimit_max": 100.0,
                "outLim_min": 0.0,
                "outLim_max": 100.0,
                "slewNeg": 0.0,
                "slewPos": 0.0
            }
        }
    ]
}
